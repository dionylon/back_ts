# -----------------------------------------------
# !!! THIS FILE WAS GENERATED BY TYPE-GRAPHQL !!!
# !!!   DO NOT MODIFY THIS FILE BY YOURSELF   !!!
# -----------------------------------------------

type Badge {
  type: String!
  description: String!
}

"""评论"""
type Comment {
  _id: ObjectId!
  author: User!

  """最多300字符"""
  content: String!
  createdAt: DateTime!

  """评论的对象"""
  parent: Post!

  """评论的回复列表"""
  replyList: [Reply!]!

  """回复的个数"""
  replyCount: Float!
}

input CommentInput {
  content: String!
  parent: ObjectId!
}

"""实际就是any类型,用于paging.after"""
scalar Cursor

"""
The javascript `Date` as string. Type represents date and time as the ISO Date string.
"""
scalar DateTime

enum Gender {
  Unknown
  Male
  Female
  Secret
}

type Group {
  _id: ObjectId!
  type: String
  name: String!
  avatar: String
}

input GroupInput {
  name: String!
  avatar: String
}

input GroupUpdateInput {
  name: String
  avatar: String
}

type Message {
  _id: ObjectId!
  from: ObjectId!
  to: ObjectId!
  type: MessageType!

  """最大长度300"""
  content: String!
  createdAt: DateTime!
}

input MessageInput {
  from: ObjectId!
  to: ObjectId!
  content: String!
}

"""消息类型"""
enum MessageType {
  Whisper
  GroupTalk
  Broadcast
}

type Mutation {
  newUser(user: UserInput!): User!
  newPost(post: PostInput!): Post!
  newMessage(message: MessageInput!): Message!
  newSchool(school: SchoolInput!): School!
  newGroup(group: GroupInput!): Group!
  newReply(reply: ReplyInput!): Reply!
  newComment(comment: CommentInput!): Comment!
  sendWhisper(message: MessageInput!): Message!
  updatePost(post: PostUpdateInput!, id: ObjectId!): Boolean!
  deletePost(id: ObjectId!): Boolean
  updateUser(user: UserUpdateInput!, id: ObjectId!): Boolean!
}

"""Mongo object id scalar type"""
scalar ObjectId

type PaginatedCommentResponse {
  items: [Comment!]!
  total: Int!
  hasMore: Boolean!
}

type PaginatedGroupResponse {
  items: [Group!]!
  total: Int!
  hasMore: Boolean!
}

type PaginatedMessageResponse {
  items: [Message!]!
  total: Int!
  hasMore: Boolean!
}

type PaginatedPostResponse {
  items: [Post!]!
  total: Int!
  hasMore: Boolean!
}

type PaginatedReplyResponse {
  items: [Reply!]!
  total: Int!
  hasMore: Boolean!
}

type PaginatedSchoolResponse {
  items: [School!]!
  total: Int!
  hasMore: Boolean!
}

type PaginatedUserResponse {
  items: [User!]!
  total: Int!
  hasMore: Boolean!
}

input PagingArgs {
  """前面加号为正序,减号为逆序"""
  sort: String = "_id"

  """如果和after一起使用,意思是在after之后跳过n项"""
  skip: Int = 0

  """上一个列表最后一项中排序字段的值,用于加速分页.如果它和skip一起使用,意思是在它之后跳过n项"""
  after: Cursor
  limit: Int = 10

  """如果为空则会从数据库中获取,否则直接返回传入的值"""
  total: Int
}

type Post {
  _id: ObjectId!
  author: User!
  content: String!

  """图片url列表"""
  imgList: [String!]
  createdAt: DateTime!
  updatedAt: DateTime!

  """评论数"""
  commentsCount: Int!
}

input PostInput {
  content: String!

  """图片url列表"""
  imgList: [String!]
}

input PostUpdateInput {
  content: String!
}

type Query {
  user(id: ObjectId!): User!
  users(paging: PagingArgs!): PaginatedUserResponse!
  post(id: ObjectId!): Post!
  posts(paging: PagingArgs!): PaginatedPostResponse!
  message(id: ObjectId!): Message!
  messages(paging: PagingArgs!): PaginatedMessageResponse!
  school(id: ObjectId!): School!
  schools(paging: PagingArgs!): PaginatedSchoolResponse!
  group(id: ObjectId!): Group!
  groups(paging: PagingArgs!): PaginatedGroupResponse!
  reply(id: ObjectId!): Reply!
  replys(paging: PagingArgs!): PaginatedReplyResponse!
  comments(paging: PagingArgs!, postId: ObjectId!): PaginatedCommentResponse
  comment(id: ObjectId!): Comment
  login(password: String!, email: String!): User
}

"""评论的回复"""
type Reply {
  _id: ObjectId!
  content: String!

  """回复的作者"""
  from: User!

  """回复的对象,为空说明直接回复父评论"""
  to: User

  """父评论"""
  parent: Comment!

  """回复所属的post"""
  post: Post!
  createdAt: DateTime!
}

input ReplyInput {
  content: String!

  """回复的评论id"""
  parent: ObjectId!
  to: ObjectId
}

type School {
  _id: ObjectId!
  type: String
  name: String!
  avatar: String

  """学校英文简称"""
  abbr: String!
}

input SchoolInput {
  name: String!
  avatar: String
  abbr: String!
}

input SchoolUpdateInput {
  name: String
  avatar: String
  abbr: String
}

type Subscription {
  subscriptMessage: Message!
}

type User {
  _id: ObjectId!

  """教育邮箱"""
  email: String!
  realName: String!
  nickName: String!
  gender: Gender!
  studentId: String!
  avatar: String
  headline: String!
  description: String!
  badges: [Badge!]!
  is_active: Boolean!
  is_admin: Boolean!
  roles: [String!]!

  """用于登录和注册"""
  token: String
}

input UserInput {
  email: String!
  realName: String!
  studentId: String!
  nickName: String!
  password: String!
  avatar: String
}

input UserUpdateInput {
  realName: String
  nickName: String
  avatar: String
  headline: String
  description: String
  gender: Float
}
